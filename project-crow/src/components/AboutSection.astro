---
// src/components/AboutSection.astro
import { experiences } from '../data/experiences.js';
---
<section id="about" class="py-24 bg-brand-background dark:bg-brand-bg px-4">
  <div class="container mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold">The Player Behind The Game</h2>
      <p class="text-brand-primary dark:text-brand-primary mt-2">A little bit about me</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-5 gap-12">
      <div class="lg:col-span-2">
        <div class="mb-8">
          <h3 class="text-2xl font-bold mb-4">Who I Am</h3>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed">
            I am building the future of decentralized predictions on blockchain by transforming complex blockchain concepts into real-world products that address meaningful challenges. As Founder & CEO of AXHP Labs and CTO of NoaSight, I lead Web3 innovation with a focus on decentralized prediction markets. Currently, I'm developing NoaSight, a decentralized prediction market platform on the SUI blockchain that offers superior transaction speed and cost efficiency compared to platforms like Polymarket. Our testnet deployment has achieved impressive traction with over 26,000 SUI in trading volume, 325 active traders, 100 markets created, 10,503 predictions made, and 19,166 SUI in total value locked. We're in pre-seed stage and actively seeking strategic investors who recognize the massive potential of prediction markets, as the sector has surpassed $2.6 billion in on-chain volume as of October 2025, growing over 180% year-over-year.
          </p>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed mt-4">
            My journey into Web3 leadership began as a Blockchain Analyst at Cloudsolutely Pte. Ltd., where I executed investment strategies that achieved 68% portfolio growth, architected hybrid security infrastructure combining MPC and smart contract multisig wallets, and advised C-level executives on seed investments in Circuit, Interswap, and Aptos. This hands-on experience in DeFi, Layer 2 solutions, and decentralized storage laid the foundation for AXHP Labs, my venture builder dedicated to systematically researching, developing, and launching high-impact Web3 products.
          </p>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed mt-4">
            In terms of thought leadership, I've published two research papers on blockchain business models: "Modern Business Model Using Ethereum Blockchain Platform and Google Cloud Platform" and "The Future of Business Models: How Ethereum Blockchain with Smart Contract Wallets and Decentralized Storage are Revolutionizing Business." My proven track record includes building NoaSight from concept to live testnet deployment, reducing digital asset vulnerability through advanced security architecture, designing enterprise architecture curriculum adopted by multiple university departments, and leading a machine learning project that achieved 84% accuracy in agricultural price forecasting.
          </p>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed mt-4">
            I'm always open to connecting with Web3 investors and VCs interested in prediction markets, blockchain developers and technical leaders, fellow founders building in the SUI ecosystem, and innovation partners exploring DeFi and Web3 applications. Whether you're looking to invest, collaborate, or simply discuss the future of decentralized technology, let's build something extraordinary together. Reach out at annurhanggaprihadi@gmail.com.
          </p>
        </div>
        <div>
          <h3 class="text-2xl font-bold mb-4">My Skillset</h3>
          <div class="flex flex-wrap gap-2">
            <span class="skill-tag">Strategic Planning</span>
            <span class="skill-tag">Leadership</span>
            <span class="skill-tag">Blockchain Architecture</span>
            <span class="skill-tag">Venture Building</span>
            <span class="skill-tag">Investment Analysis</span>
            <span class="skill-tag">Product Management</span>
            <span class="skill-tag">Web3 Innovation</span>
            <span class="skill-tag">Due Diligence</span>
            <span class="skill-tag">Business Strategy</span>
            <span class="skill-tag">Data-Driven Decision Making</span>
            <span class="skill-tag">Portfolio Management</span>
          </div>
        </div>
      </div>

      <div class="lg:col-span-3">
        <h3 class="text-2xl font-bold mb-4">My Journey</h3>
        <div class="relative border-l-2 border-brand-outline dark:border-brand-outline pl-6">
          {experiences.map((exp) => (
            <div class="mb-8 relative cursor-pointer experience-item hover:bg-brand-surface/30 p-4 rounded-lg transition-colors group" data-experience-id={exp.id}>
              <div class="absolute -left-10 top-5 w-4 h-4 bg-brand-primary rounded-full"></div>
              
              <div class="flex items-start gap-4 mb-3">
                {exp.companyImage && (
                  <img src={exp.companyImage} alt={exp.company} class="w-12 h-12 rounded-lg object-cover border border-brand-outline" />
                )}
                <div class="flex-1">
                  <p class="font-bold text-lg group-hover:text-brand-primary transition-colors">{exp.title}</p>
                  <p class="text-sm text-brand-text-secondary dark:text-brand-text-secondary">{exp.company} Â· {exp.duration}</p>
                </div>
              </div>
              
              <p class="mt-2 text-brand-text-primary dark:text-brand-text-primary text-sm">{exp.summary}</p>
              
              {exp.media && exp.media.length > 0 && (
                <div class="mt-4 flex flex-wrap gap-2">
                  {exp.media.map((item) => (
                    <a 
                      href={item.url} 
                      target="_blank" 
                      rel="noopener noreferrer"
                      class="inline-block"
                      onclick="event.stopPropagation();"
                    >
                      <img
                        src={item.companyimage}
                        alt={item.title}
                        class="w-16 h-16 rounded object-cover border border-brand-outline hover:border-brand-primary transition-colors"
                        title={item.title}
                      />
                    </a>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>

  <!-- Experience Modal -->
  <div id="experience-modal" class="fixed inset-0 bg-black/70 hidden z-50 items-center justify-center p-4">
    <div class="bg-brand-surface dark:bg-brand-surface rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-brand-outline">
      <div class="p-6">
        <div class="flex justify-between items-start mb-6">
          <div class="flex items-center space-x-4">
            <img id="modal-company-image" src="" alt="Company" class="w-20 h-20 rounded-lg object-cover border-2 border-brand-outline">
            <div>
              <h3 id="modal-title" class="text-2xl font-bold text-brand-text-primary dark:text-brand-text-primary"></h3>
              <p id="modal-company" class="text-brand-text-secondary dark:text-brand-text-secondary font-semibold"></p>
              <p id="modal-duration" class="text-sm text-brand-text-secondary dark:text-brand-text-secondary"></p>
              <p id="modal-location" class="text-sm text-brand-text-secondary dark:text-brand-text-secondary"></p>
            </div>
          </div>
          <button id="close-modal" class="text-brand-text-secondary dark:text-brand-text-secondary hover:text-brand-primary dark:hover:text-brand-primary text-3xl font-bold leading-none">&times;</button>
        </div>

        <div id="modal-content" class="space-y-6">
          <!-- Content will be populated by JavaScript -->
        </div>

        <div id="modal-media" class="mt-6 pt-6 border-t border-brand-outline">
          <!-- Media will be populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>
</section>

<script define:vars={{ experiences }}>
  // Experience modal functionality
  const modal = document.getElementById('experience-modal');
  const closeBtn = document.getElementById('close-modal');
  const experienceItems = document.querySelectorAll('.experience-item');

  function openModal(experienceId) {
    const exp = experiences.find(e => e.id === experienceId);
    if (!exp) return;

    // Populate modal header
    document.getElementById('modal-title').textContent = exp.title;
    document.getElementById('modal-company').textContent = exp.company;
    document.getElementById('modal-duration').textContent = exp.duration;
    document.getElementById('modal-location').textContent = exp.location;
    document.getElementById('modal-company-image').src = exp.companyImage;

    // Build detailed content
    let content = `<p class="text-brand-text-secondary dark:text-brand-text-secondary mb-6 leading-relaxed">${exp.summary}</p>`;

    // Dynamically add all detail sections
    Object.keys(exp.details).forEach(sectionKey => {
      const sectionTitle = sectionKey
        .replace(/([A-Z])/g, ' $1')
        .trim()
        .toUpperCase();
      
      content += `<div class="mb-6"><h4 class="text-lg font-bold text-brand-primary dark:text-brand-primary mb-3">${sectionTitle}</h4>`;
      content += `<ul class="list-disc list-inside space-y-2 text-brand-text-secondary dark:text-brand-text-secondary">`;
      exp.details[sectionKey].forEach(item => {
        content += `<li class="leading-relaxed">${item}</li>`;
      });
      content += `</ul></div>`;
    });

    document.getElementById('modal-content').innerHTML = content;

    // Build media section
    let mediaContent = '';
    if (exp.media && exp.media.length > 0) {
      mediaContent += `<h4 class="text-lg font-bold text-brand-primary dark:text-brand-primary mb-4">Media & Resources</h4>`;
      mediaContent += `<div class="grid grid-cols-2 md:grid-cols-4 gap-4">`;
      exp.media.forEach(item => {
        mediaContent += `
          <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="group">
            <div class="relative overflow-hidden rounded-lg border border-brand-outline hover:border-brand-primary transition-colors">
              <img src="${item.companyimage}" alt="${item.title}" class="w-full h-24 object-cover group-hover:scale-110 transition-transform duration-300" />
              <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
              </div>
            </div>
            <p class="text-xs text-brand-text-secondary dark:text-brand-text-secondary mt-2 text-center">${item.title}</p>
          </a>
        `;
      });
      mediaContent += `</div>`;
    }

    document.getElementById('modal-media').innerHTML = mediaContent;

    // Show modal
    modal.classList.remove('hidden');
    modal.classList.add('flex');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    modal.classList.add('hidden');
    modal.classList.remove('flex');
    document.body.style.overflow = 'auto';
  }

  // Event listeners
  experienceItems.forEach(item => {
    item.addEventListener('click', () => {
      const experienceId = item.dataset.experienceId;
      openModal(experienceId);
    });
  });

  closeBtn.addEventListener('click', closeModal);

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
      closeModal();
    }
  });
</script>

