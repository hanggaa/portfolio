---
// src/components/AboutSection.astro
import { experiences } from '../data/experiences.js';
---
<section id="about" class="py-24 bg-brand-background dark:bg-brand-bg px-4">
  <div class="container mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold">The Architect Behind The Product</h2>
      <p class="text-brand-primary dark:text-brand-primary mt-2">Bridging the gap between complex infrastructure and user experience.</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-5 gap-12">
      <div class="lg:col-span-2">
        <div class="mb-8">
          <h3 class="text-2xl font-bold mb-4">Who I Am</h3>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed">
            I am a Technical Product Manager and Fintech Strategist with a Computer Science background, specializing in turning complex technical concepts like distributed ledger technology and high-frequency trading—into seamless, real-world products. Currently, I serve as the Product Lead for NoaSight, a high-performance prediction market platform on the SUI blockchain. Unlike standard platforms, we leverage parallel execution to offer superior transaction speed. My focus is purely on execution and scalability; I architected the full-stack solution from the Move smart contracts to the user interface, which has successfully acquired over 300 active traders. This robust infrastructure has processed more than 10,500 on-chain predictions and generated over $42K in Transaction Value, proving the platform's capability to handle real-world financial demand.
          </p>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed mt-4">
            My path into Product Leadership started as a Blockchain & Data Analyst at Cloudsolutely Pte. Ltd. (Singapore). There, I managed a $1M+ corporate portfolio, executing data-driven strategies that achieved 68% portfolio growth. I also architected hybrid security infrastructures (MPC wallets), significantly reducing digital asset vulnerability for institutional funds. This hands-on experience in Data Analysis (SQL), System Design, and Financial Modeling became the foundation for my transition into full-cycle Product Management, where I now bridge the gap between business goals and engineering realities.
          </p>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed mt-4">
            I bridge academia and industry, having published research on "Modern Business Models Using Blockchain & Cloud Platforms" and designing Enterprise Architecture curricula adopted by universities. I believe that true innovation happens when advanced technology is made accessible through intuitive product design.
          </p>
          <p class="text-brand-text-secondary dark:text-brand-text-secondary leading-relaxed mt-4">
            I am now looking to bring my experience in building high-volume transactional platforms to a dynamic technology team. I am always open to connecting with product teams, technical leaders, and innovators in the Fintech and Web3 space, as well as fellow builders in the SUI ecosystem. Whether you are looking to collaborate or simply discuss the future of decentralized technology, let's build something extraordinary.
          </p>
        </div>
        <div>
          <h3 class="text-2xl font-bold mb-4">My Skillset</h3>
          <div class="flex flex-wrap gap-2">
            <span class="skill-tag">Product Management</span>
            <span class="skill-tag">Product Strategy</span>
            <span class="skill-tag">Agile & Scrum Methodologies</span>
            <span class="skill-tag">SQL & Data Analytics</span>
            <span class="skill-tag">System Architecture</span>
            <span class="skill-tag">Fintech & Trading Systems</span>
            <span class="skill-tag">Blockchain Architecture</span>
            <span class="skill-tag">Go-to-Market Strategy</span>
            <span class="skill-tag">User Research & Testing</span>
            <span class="skill-tag">Risk Management</span>
          </div>
        </div>
      </div>

      <div class="lg:col-span-3">
        <h3 class="text-2xl font-bold mb-4">My Journey</h3>
        <div class="relative border-l-2 border-brand-outline dark:border-brand-outline pl-6">
          {experiences.map((exp) => (
            <div class="mb-8 relative cursor-pointer experience-item hover:bg-brand-surface/30 p-4 rounded-lg transition-colors group" data-experience-id={exp.id}>
              <div class="absolute -left-10 top-5 w-4 h-4 bg-brand-primary rounded-full"></div>
              
              <div class="flex items-start gap-4 mb-3">
                {exp.companyImage && (
                  <img src={exp.companyImage} alt={exp.company} class="w-12 h-12 rounded-lg object-cover border border-brand-outline" />
                )}
                <div class="flex-1">
                  <p class="font-bold text-lg group-hover:text-brand-primary transition-colors">{exp.title}</p>
                  <p class="text-sm text-brand-text-secondary dark:text-brand-text-secondary">{exp.company} · {exp.duration}</p>
                </div>
              </div>
              
              <p class="mt-2 text-brand-text-primary dark:text-brand-text-primary text-sm">{exp.summary}</p>
              
              {exp.media && exp.media.length > 0 && (
                <div class="mt-4 flex flex-wrap gap-2">
                  {exp.media.map((item) => (
                    <a 
                      href={item.url} 
                      target="_blank" 
                      rel="noopener noreferrer"
                      class="inline-block"
                      onclick="event.stopPropagation();"
                    >
                      <img
                        src={item.companyimage}
                        alt={item.title}
                        class="w-16 h-16 rounded object-cover border border-brand-outline hover:border-brand-primary transition-colors"
                        title={item.title}
                      />
                    </a>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>

  <!-- Experience Modal -->
  <div id="experience-modal" class="fixed inset-0 bg-black/70 hidden z-50 items-center justify-center p-4">
    <div class="bg-brand-surface dark:bg-brand-surface rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-brand-outline">
      <div class="p-6">
        <div class="flex justify-between items-start mb-6">
          <div class="flex items-center space-x-4">
            <img id="modal-company-image" src="" alt="Company" class="w-20 h-20 rounded-lg object-cover border-2 border-brand-outline">
            <div>
              <h3 id="modal-title" class="text-2xl font-bold text-brand-text-primary dark:text-brand-text-primary"></h3>
              <p id="modal-company" class="text-brand-text-secondary dark:text-brand-text-secondary font-semibold"></p>
              <p id="modal-duration" class="text-sm text-brand-text-secondary dark:text-brand-text-secondary"></p>
              <p id="modal-location" class="text-sm text-brand-text-secondary dark:text-brand-text-secondary"></p>
            </div>
          </div>
          <button id="close-modal" class="text-brand-text-secondary dark:text-brand-text-secondary hover:text-brand-primary dark:hover:text-brand-primary text-3xl font-bold leading-none">&times;</button>
        </div>

        <div id="modal-content" class="space-y-6">
          <!-- Content will be populated by JavaScript -->
        </div>

        <div id="modal-media" class="mt-6 pt-6 border-t border-brand-outline">
          <!-- Media will be populated by JavaScript -->
        </div>
      </div>
    </div>
  </div>
</section>

<script define:vars={{ experiences }}>
  // Experience modal functionality
  const modal = document.getElementById('experience-modal');
  const closeBtn = document.getElementById('close-modal');
  const experienceItems = document.querySelectorAll('.experience-item');

  function openModal(experienceId) {
    const exp = experiences.find(e => e.id === experienceId);
    if (!exp) return;

    // Populate modal header
    document.getElementById('modal-title').textContent = exp.title;
    document.getElementById('modal-company').textContent = exp.company;
    document.getElementById('modal-duration').textContent = exp.duration;
    document.getElementById('modal-location').textContent = exp.location;
    document.getElementById('modal-company-image').src = exp.companyImage;

    // Build detailed content
    let content = `<p class="text-brand-text-secondary dark:text-brand-text-secondary mb-6 leading-relaxed">${exp.summary}</p>`;

    // Dynamically add all detail sections
    Object.keys(exp.details).forEach(sectionKey => {
      const sectionTitle = sectionKey
        .replace(/([A-Z])/g, ' $1')
        .trim()
        .toUpperCase();
      
      content += `<div class="mb-6"><h4 class="text-lg font-bold text-brand-primary dark:text-brand-primary mb-3">${sectionTitle}</h4>`;
      content += `<ul class="list-disc list-inside space-y-2 text-brand-text-secondary dark:text-brand-text-secondary">`;
      exp.details[sectionKey].forEach(item => {
        content += `<li class="leading-relaxed">${item}</li>`;
      });
      content += `</ul></div>`;
    });

    document.getElementById('modal-content').innerHTML = content;

    // Build media section
    let mediaContent = '';
    if (exp.media && exp.media.length > 0) {
      mediaContent += `<h4 class="text-lg font-bold text-brand-primary dark:text-brand-primary mb-4">Media & Resources</h4>`;
      mediaContent += `<div class="grid grid-cols-2 md:grid-cols-4 gap-4">`;
      exp.media.forEach(item => {
        mediaContent += `
          <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="group">
            <div class="relative overflow-hidden rounded-lg border border-brand-outline hover:border-brand-primary transition-colors">
              <img src="${item.companyimage}" alt="${item.title}" class="w-full h-24 object-cover group-hover:scale-110 transition-transform duration-300" />
              <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
              </div>
            </div>
            <p class="text-xs text-brand-text-secondary dark:text-brand-text-secondary mt-2 text-center">${item.title}</p>
          </a>
        `;
      });
      mediaContent += `</div>`;
    }

    document.getElementById('modal-media').innerHTML = mediaContent;

    // Show modal
    modal.classList.remove('hidden');
    modal.classList.add('flex');
    document.body.style.overflow = 'hidden';
  }

  function closeModal() {
    modal.classList.add('hidden');
    modal.classList.remove('flex');
    document.body.style.overflow = 'auto';
  }

  // Event listeners
  experienceItems.forEach(item => {
    item.addEventListener('click', () => {
      const experienceId = item.dataset.experienceId;
      openModal(experienceId);
    });
  });

  closeBtn.addEventListener('click', closeModal);

  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
      closeModal();
    }
  });
</script>

